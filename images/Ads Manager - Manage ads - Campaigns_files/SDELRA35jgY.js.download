if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }/*FB_PKG_DELIM*/

__d("adsLocationListStoreSelector",["AdsLocationListProvider","AdsLocationListStore","StoresToLaminarMigrationODSLoggerUtil","adsCreateStoreSelector","killswitch"],(function(a,b,c,d,e,f,g){"use strict";a=c("adsCreateStoreSelector")([c("AdsLocationListStore")],function(a){return c("AdsLocationListStore").get(a)},{name:f.id+".adsLocationListStoreGetSelectorLegacy"});b=d("StoresToLaminarMigrationODSLoggerUtil").adsCreateStoreSelectorForMigrationStores(c("AdsLocationListStore"),c("AdsLocationListProvider").toFluxStore(),function(a){return c("AdsLocationListStore").get(a)},function(a){return c("AdsLocationListProvider")().get(a)});e=c("killswitch")("ADS_STORES_TO_LAMINAR_MIGRATION")?a:b;f=e;g["default"]=f}),98);
__d("AdsPreviewSharingMenuContainer_LEGACY.react",["fbt","AdsAccountStore","AdsAdgroupSpecUtils","AdsAssetFeedUtils","AdsDCOPreviewTokenProvider","AdsDataAtom","AdsDynamicAdsPreviewURLProvider","AdsDynamicAdsPreviewURLProviderUtils","AdsFluxContainer","AdsInstagramActorIDUtils","AdsInstagramUsernameStore","AdsIsAdditionalProfilePlusAdProvider","AdsLoadObjectUtils","AdsLoadState_LEGACY","AdsLocalAwarenessUtils","AdsPEAdgroupLiveSelectors","AdsPEAdgroupSelectors","AdsPECampaignGroupLiveSelectors","AdsPECampaignLiveSelectors","AdsPECampaignSelectors","AdsPagePostUtils","AdsPlacementAPISpecReaderUtils","AdsPreviewLinkPlugins","AdsPreviewSharingMenu.react","AdsPreviewSharingUtils","AdsSelectorUtils","AdsUEditorAdgroupDynamicLocalAdsUtils","AdsUEditorAdgroupSelectors","AdsUEditorContextType","CurrentUser","FBJSON","LoadObject","adsCreateSelector","adsCreateStoreSelector","adsDynamicItemIdsSelector","adsLocationListStoreSelector","isStringNullOrEmpty","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=[],k=c("adsCreateSelector")([c("adsCreateStoreSelector")([],function(a){return a},{name:f.id}),d("AdsPECampaignSelectors").getSelector,d("AdsPEAdgroupSelectors").getSelector_LEGACY],function(a,b,e){c("AdsDataAtom").isDispatching()&&c("AdsDataAtom").waitFor(d("AdsSelectorUtils").getStoreDispatchTokens([d("AdsPECampaignSelectors").getSelector,d("AdsPEAdgroupLiveSelectors").getSelector]));e=e(a);return!e.hasValue()?c("LoadObject").loading():b(e.getValueEnforcing().adset_id)},{name:f.id+".combinedCampaignSelector"}),l=c("adsCreateSelector")([c("adsCreateStoreSelector")([],function(a){return a},{name:f.id}),d("AdsPECampaignLiveSelectors").getSelector,d("AdsPEAdgroupSelectors").getSelector_LEGACY],function(a,b,e){c("AdsDataAtom").isDispatching()&&c("AdsDataAtom").waitFor(d("AdsSelectorUtils").getStoreDispatchTokens([d("AdsPECampaignLiveSelectors").getSelector,d("AdsPEAdgroupLiveSelectors").getSelector]));e=e(a);return!e.hasValue()?c("LoadObject").loading():b(e.getValueEnforcing().adset_id)},{name:f.id+".liveCampaignSelector"}),m=c("adsCreateSelector")([c("adsCreateStoreSelector")([],function(a){return a},{name:f.id}),d("AdsPEAdgroupSelectors").getSelector_LEGACY,d("AdsPECampaignGroupLiveSelectors").getSelector_LEGACY],function(a,b,e){c("AdsDataAtom").isDispatching()&&c("AdsDataAtom").waitFor(d("AdsSelectorUtils").getStoreDispatchTokens([d("AdsPEAdgroupSelectors").getSelector_LEGACY,d("AdsPECampaignGroupLiveSelectors").getSelector_LEGACY]));b=b(a);return!b.hasValue()?c("LoadObject").loading():e(b.getValueEnforcing().campaign_id)},{name:f.id+".campaignGroupSelector"}),n=c("adsCreateStoreSelector")(m.getStores(),function(a){a=m(a);if(!a.hasValue())return c("LoadObject").loading();var b=a.getValueEnforcing().objective;a=(a=a.getValueEnforcing())==null?void 0:(a=a.promoted_object)==null?void 0:a.page_id;return c("LoadObject").withValue(d("AdsLocalAwarenessUtils").isDynamicLocalAwareness(b,a))},{name:f.id+".isDynamicLocalAwarenessSelector"}),o=c("adsCreateStoreSelector")([].concat(n.getStores(),d("AdsPEAdgroupSelectors").getSelector_LEGACY.getStores(),[c("AdsDynamicAdsPreviewURLProvider").toFluxStore()]),function(a){var b=n(a);c("AdsDataAtom").isDispatching()&&c("AdsDataAtom").waitFor(d("AdsSelectorUtils").getStoreDispatchTokens([d("AdsPEAdgroupSelectors").getSelector_LEGACY]));a=d("AdsPEAdgroupSelectors").getSelector_LEGACY()(a);b=d("AdsLoadObjectUtils").all([a,b]).mapValue(function(a){var b=a[0];a=a[1];return a||d("AdsUEditorAdgroupDynamicLocalAdsUtils").isDynamicLocalAdgroup(b)});if(!b.hasValue()||!a.hasValue())return c("LoadObject").loading();if(!b.getValueEnforcing())return c("LoadObject").withValue(null);b=d("AdsAdgroupSpecUtils").getPagePostID(a.getValueEnforcing());return c("isStringNullOrEmpty")(b)?c("LoadObject").withValue(null):c("LoadObject").withValue(d("AdsDynamicAdsPreviewURLProviderUtils").getPreviewURL(c("AdsDynamicAdsPreviewURLProvider")(),a.getValueEnforcing().id,(a=a.getValueEnforcing())==null?void 0:(a=a.creative)==null?void 0:a.id,d("AdsPagePostUtils").getPostIdFromPagePostId_BROKEN(b)).getValue())},{name:f.id+".dynamicLocalAdPreviewURLSelector"}),p=c("adsCreateSelector")([c("adsCreateStoreSelector")([],function(a){return a},{name:f.id}),d("AdsPEAdgroupSelectors").getSelector_LEGACY,c("adsDynamicItemIdsSelector")],function(a,b,e){c("AdsDataAtom").isDispatching()&&c("AdsDataAtom").waitFor(d("AdsSelectorUtils").getStoreDispatchTokens([d("AdsPEAdgroupSelectors").getSelector_LEGACY]));b=b(a);if(!b.hasValue())return c("LoadObject").loading();a=(a=b.getValueEnforcing())==null?void 0:(b=a.creative)==null?void 0:b.product_set_id;return a==null?c("LoadObject").withValue(j):e(a)},{name:f.id+".productItemIDsSelector"}),q=c("adsCreateStoreSelector")([].concat(n.getStores(),l.getStores(),c("adsLocationListStoreSelector").getStores()),function(a){var b=n(a);a=l(a);if(!b.hasValue()||!a.hasValue())return c("LoadObject").loading();if(!b.getValueEnforcing())return c("LoadObject").withValue(null);b=(b=a.getValueEnforcing())==null?void 0:(b=b.promoted_object)==null?void 0:b.place_page_set_id;if(b==null)return c("LoadObject").withValue(null);a=c("adsLocationListStoreSelector")(d("FBJSON").stringify({targeting:a.getValueEnforcing().targeting,placePageSetID:b}));return a.mapValue(function(a){return(a=a[0])!=null?a:null}).mapError(function(a){return c("LoadObject").withValue(null)})},{name:f.id+".dynamicLocalAdEligiblePageIDSelector"}),r=c("adsCreateStoreSelector")([].concat(d("AdsPEAdgroupLiveSelectors").getSelector.getStores(),[c("AdsInstagramUsernameStore")]),function(a){c("AdsDataAtom").isDispatching()&&c("AdsDataAtom").waitFor(d("AdsSelectorUtils").getStoreDispatchTokens([d("AdsPEAdgroupSelectors").getSelector_LEGACY]));a=d("AdsPEAdgroupLiveSelectors").getSelector()(a);if(!a.hasValue())return c("LoadObject").loading();a=d("AdsInstagramActorIDUtils").getInstagramActorID(a.getValueEnforcing());if(a==null)return c("LoadObject").withValue(null);a=c("AdsInstagramUsernameStore").get(a);return a.loadState!==c("AdsLoadState_LEGACY").LOADED?c("LoadObject").loading():c("LoadObject").withValue(a)},{name:f.id+".instagramAccountSelector"}),s=c("adsCreateStoreSelector")([c("AdsIsAdditionalProfilePlusAdProvider").toFluxStore()],function(a){return c("LoadObject").withValue(c("AdsIsAdditionalProfilePlusAdProvider")().get(a)).getValue()||c("LoadObject").withValue(!1)},{name:f.id+".isAdditionalProfilePlusAdSelector"}),t=c("adsCreateSelector")([c("adsCreateStoreSelector")([],function(a){return a},{name:f.id}),c("AdsDCOPreviewTokenProvider").toFluxSelector()],function(a,b){return b.get(a)},{name:f.id+".dcoAdTokenSelector"}),u=c("adsCreateStoreSelector")([].concat(c("AdsAccountStore").getSelectedAccount.getStores(),k.getStores(),m.getStores(),l.getStores(),q.getStores(),o.getStores(),r.getStores(),p.getStores(),d("AdsPEAdgroupLiveSelectors").getSelector.getStores(),s.getStores(),t.getStores()),function(a){c("AdsDataAtom").isDispatching()&&c("AdsDataAtom").waitFor(d("AdsSelectorUtils").getStoreDispatchTokens([d("AdsPEAdgroupSelectors").getSelector_LEGACY]));var b=c("AdsAccountStore").getSelectedAccount().getValue();return{account:b,adgroup:d("AdsPEAdgroupLiveSelectors").getSelector()(a.adgroupID),campaign:l(a.adgroupID),campaignGroup:m(a.adgroupID),combinedCampaignSpec:k(a.adgroupID),dcoAdToken:t(a.adgroupID),dynamicLocalAdEligiblePageID:q(a.adgroupID),dynamicLocalAdPreviewURL:o(a.adgroupID),instagramAccount:r(a.adgroupID),productItemIDs:p(a.adgroupID),isAdditionalProfilePlusAd:s(a.adgroupID)}},{name:f.id+".propsSelector"}),v=d("AdsUEditorAdgroupSelectors").adgroups.every(d("AdsAssetFeedUtils").isDCOWithBrandedContent);a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.getStores=function(){return u.getStores()};b.calculateState=function(a,b,d){a=d.adgroupEditorContext;return babelHelpers["extends"]({},u(b),{plugins:c("AdsPreviewLinkPlugins").getList(),isDCOWithBrandedContent:!!a&&v(a)})};var e=b.prototype;e.render=function(){var a=this.state,b=a.account,e=a.adgroup,f=a.campaign,g=a.campaignGroup,k=a.combinedCampaignSpec,l=a.dcoAdToken,m=a.dynamicLocalAdEligiblePageID,n=a.dynamicLocalAdPreviewURL,o=a.instagramAccount,p=a.productItemIDs;a=a.isAdditionalProfilePlusAd;var q=this.props.previewRenderType;if(!e.hasValue()||!f.hasValue()||!g.hasValue()||!k.hasValue()||!m.hasValue()||!n.hasValue()||!l.hasValue()||b==null)return null;b={account:b,accountID:b.account_id,adgroup:e.getValueEnforcing(),campaign:f.getValueEnforcing(),campaignGroup:g.getValueEnforcing(),dcoAdToken:l.getValueEnforcing(),dofPreviewSpec:this.props.dofPreviewSpec,dynamicLocalAdEligiblePageID:m,dynamicLocalAdPreviewURL:n,instagramAccount:o.getValue(),isFBEmployee:c("CurrentUser").isEmployee(),isPublished:!0,loggingTag:this.props.loggingTag,placementAPISpec:d("AdsPlacementAPISpecReaderUtils").convertCampaignToPlacementSpec_LEGACY(k.getValueEnforcing()),productItemIDs:p.getValue()||j,isAdditionalProfilePlusAd:a.getValue()||!1};e=d("AdsPreviewSharingUtils").getLinksFromPlugins(this.state.plugins,b);var r;p.hasError()&&(r=h._("This preview can't be shared. Your catalog may be out of date or you don't have permission to access it."));return i.jsx(c("AdsPreviewSharingMenu.react"),{disabled:q==="FALLBACK"||e.length===0||this.state.isDCOWithBrandedContent||p.hasError(),disabledMessage:r,links:e,loggingContext:this.props.loggingContext})};return b}(i.PureComponent);a.contextTypes=c("AdsUEditorContextType").adgroup;b=c("AdsFluxContainer").create(a,{withProps:!0,withContext:!0,name:f.id});g["default"]=b}),98);