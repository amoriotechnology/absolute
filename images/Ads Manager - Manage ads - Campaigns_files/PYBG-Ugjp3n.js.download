if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }/*FB_PKG_DELIM*/

__d("AdsImageCroppedImageUploadSuccessDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"AdsImageCroppedImageUploadSuccessDataActionPlugin");e.exports=a}),null);
__d("AdsShouldSaveToAssetLibraryProviderPlugin",[],(function(a,b,c,d,e,f){"use strict";a={initialState:{shouldSaveToAssetLibrary:!1}};b=a;f["default"]=b}),66);
__d("AdsShouldSaveToAssetLibraryProvider",["AdsShouldSaveToAssetLibraryProviderPlugin","Laminar"],(function(a,b,c,d,e,f){"use strict";e.exports=b("Laminar").__createProvider(b("AdsShouldSaveToAssetLibraryProviderPlugin"),"AdsShouldSaveToAssetLibraryProviderPlugin")}),null);
__d("AdsShouldSaveToAssetLibraryReducerPlugin",[],(function(a,b,c,d,e,f){"use strict";a={reduce:function(a,b){return{shouldSaveToAssetLibrary:b.shouldSaveToAssetLibrary}}};b=a;f["default"]=b}),66);
__d("AdsShouldSaveToAssetLibraryDataAction",["AdsShouldSaveToAssetLibraryProvider","AdsShouldSaveToAssetLibraryReducerPlugin","Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[b("Laminar").__createReducer(b("AdsShouldSaveToAssetLibraryReducerPlugin"),b("AdsShouldSaveToAssetLibraryProvider"),{},"")]},function(){return[]},"AdsShouldSaveToAssetLibraryDataActionPlugin");e.exports=a}),null);
__d("AdsFullSizeImageBox.react",["AdsImageIDClasses","AdsImageUtils","BackgroundImage.react","curry","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=function(a){var b=d("AdsImageUtils").getImageTransformForBounds(a.image.width,a.image.height,a.width,a.height,a.crop);return h.jsx("div",{className:"x1rg5ohu x2izyaf",children:h.jsx(c("BackgroundImage.react"),{backgroundSize:a.renderStyle==="COVER"?"cover":"contain",cropTransform:b,height:a.height,src:a.image.url,width:a.width,onImageLoad:a.onLoaded})})},j=function(a){var b=a.className,e=a.crop,f=a.image,g=a.imageID,i=a.width,j=a.height;a=a.onContextMenu;a=c("curry")(a,g instanceof d("AdsImageIDClasses").AdsShutterstockImageID);g=d("AdsImageUtils").renderScaledCroppedImage(f.url,i,j,f.width,f.height,e,a);return h.jsx("div",{className:b,children:g})},k=function(a){var b=a.className,c=a.image,e=a.width;a=a.height;e=d("AdsImageUtils").renderScaledImage(c.url,e,a,c.width,c.height);return h.jsx("div",{className:b,children:e})};function a(a){switch(a.renderStyle){case"CONTAIN":case"COVER":return h.jsx(i,babelHelpers["extends"]({},a));case"SCALE_CROP":return h.jsx(j,babelHelpers["extends"]({},a));case"SCALE":return h.jsx(k,babelHelpers["extends"]({},a))}return null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("AdsFullSizeImageBoxContainer.react",["AdsFluxHooks","AdsFullSizeImageBox.react","AdsImageInfoStore","AdsReachFrequencyInsteamPlacementVideoRequirementsDialogShownProvider","JSResource","LoadingImageBox.react","adsCreateSelector","adsCreateStoreSelector","lazyLoadComponent","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=c("AdsReachFrequencyInsteamPlacementVideoRequirementsDialogShownProvider").toFluxSelector(),j=c("lazyLoadComponent")(c("JSResource")("AdsReachFrequencyInstreamPlacementUnderDeliveryWarningCardContainer.react").__setRef("AdsFullSizeImageBoxContainer.react"));b=c("adsCreateStoreSelector")([],function(a){return a},{name:f.id+".propsSelector"});var k=c("adsCreateSelector")([c("AdsImageInfoStore").getFullSizeSelector,b],function(a,b){b=b.imageID;return a(b)},{name:f.id+".fullsizeSelector"});function a(a){var b=d("AdsFluxHooks").useAdsSelector(k,a),e=d("AdsFluxHooks").useAdsSelector(i).isFacebookInstreamSelected;!b.isDone()&&!b.hasValue()&&(a.onLoaded==null?void 0:a.onLoaded());b.hasError()&&(a.onErrored==null?void 0:a.onErrored());return!b.hasValue()?h.jsx(c("LoadingImageBox.react"),{className:a.className,height:a.height,width:a.width}):h.jsxs(h.Fragment,{children:[h.jsx(c("AdsFullSizeImageBox.react"),babelHelpers["extends"]({},a,{image:b.getValueEnforcing(),onContextMenu:l})),e?h.jsx(j,{isSummary:!1}):null]})}a.displayName=a.name+" [from "+f.id+"]";function l(a,b){a&&b.preventDefault()}e=d("AdsFluxHooks").adsFluxContainer(a);g["default"]=e}),98);
__d("AdsSaveCropToAssetLibraryUtils",["AdsDaoGraph","Promise"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return new(b("Promise"))(function(b,c){var d=new Image();d.setAttribute("crossOrigin","anonymous");d.onload=function(){return b(d)};d.onerror=c;d.src=a})}function i(a,c){return new(b("Promise"))(function(b,d){d=document.createElement("canvas");var e=d.getContext("2d");d.width=c[1][0]-c[0][0];d.height=c[1][1]-c[0][1];e.drawImage(a,-c[0][0],-c[0][1]);b(d.toDataURL("img/png"))})}var j=function(a,b,c,d,e){return h(a).then(function(a){return i(a,b)}).then(function(a){return k(a,c,d,e)})},k=function(a,b,c,d){return babelHelpers["extends"]({},l(a),{accountId:d,name:b+"_"+c})},l=function(a){a=a.split(",");var b=a[0];a=a[1];return{encoding:b,bytes:a}},m=function(a){var d=function(b){return{accountID:a.accountId,hash:b.images[a.name].hash}};return new(b("Promise"))(function(b,e){c("AdsDaoGraph").add.imageForAccount.one(function(a){b(d(a))},babelHelpers["extends"]({},a,{handleError:e}))})};a=function(a,c){var d=a.getUrl(),e=a.getName();if(d==null||e==null||a==null)return b("Promise").reject("Invalid data to save image");a=a.getCrops();a=Object.entries(a).map(function(a){var b=a[0];a=a[1];return j(d,a,e,b,c)});return b("Promise").all(a).then(function(a){return b("Promise").all(a.map(function(a){return m(a)}))})};g.saveCropsToAssetLibrary=a}),98);
__d("AdsImageCropperDialog.react",["AdImageSpecCropKeys","AdsImageCroppedImageUploadSuccessDataAction","AdsImageCropperEditor.react","AdsImageLegacy","AdsInterfacesLogEvents","AdsInterfacesLogger","AdsPlatformTypes","AdsSaveCropToAssetLibraryUtils","AdsShouldSaveToAssetLibraryDataAction","ApiAdPageTypeToPlatformMap","areEqual","emptyFunction","forEachObject","immutable","mapObject","promiseDone","prop-types","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=function(a){return new(c("AdsImageLegacy"))(babelHelpers["extends"]({},a,{crops:a.crops&&c("immutable").Map.isMap(a.crops)&&typeof a.crops.toJS==="function"?a.crops.toJS():a.crops}))};a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=d=a.call.apply(a,[this].concat(f))||this,d.$4=function(a,b,c,e){e===void 0&&(e=!0),d.setState(function(f){return d.$7(f,a,b,c,e)},function(){d.props.onImageUpdate&&d.props.onImageUpdate(d.state.image)})},d.$3=function(){var a={};c("forEachObject")(d.state.platformCustomizations,function(b,d){b.crops&&b.getCrop(c("AdImageSpecCropKeys").NO_CROP)&&delete b.crops,a[d]=b.toJSON()});var b=d.state.image;b.crops&&b.getCrop(c("AdImageSpecCropKeys").NO_CROP)&&delete b.crops;var e=b.toJSON();e.platformImageObjects=a;d.props.onSelect(e);d.props.onClose();d.props.accountID&&d.$9(b,d.props.accountID)},d.$5=function(a){var b=d.$8(a);if(!d.state.initialDialogState)return;b=d.state.initialDialogState[b];d.$4(b,a,b.crops,!1)},d.$8=function(a){return a&&c("ApiAdPageTypeToPlatformMap")[a]||c("AdsPlatformTypes").DEFAULT_PLATFORM},d.$6=function(a){c("AdsShouldSaveToAssetLibraryDataAction").dispatch({shouldSaveToAssetLibrary:a},{line:"417",module:"AdsImageCropperDialog.react.js"}),a&&c("AdsInterfacesLogger").log({eventName:"crop_image_save_to_library",eventCategory:c("AdsInterfacesLogEvents").EventCategory.USER_ACTION})},b)||babelHelpers.assertThisInitialized(d)}var e=b.prototype;e.UNSAFE_componentWillMount=function(){this.$1(this.props)};e.componentDidMount=function(){c("AdsInterfacesLogger").log({eventName:"crop_image_dialog_opened",eventCategory:c("AdsInterfacesLogEvents").EventCategory.USER_ACTION})};e.UNSAFE_componentWillReceiveProps=function(a){(!c("areEqual")(a.image,this.props.image)||!c("areEqual")(a.platformCustomizations,this.props.platformCustomizations))&&this.$1(a)};e.$1=function(a){var b=this,d=[],e=i(a.image);d.push(e);var f={};a.platformCustomizations&&(f=c("mapObject")(a.platformCustomizations,function(a){a=i(a);d.push(a);return a}));d.forEach(function(a){a.isStockImage()&&!a.hasFullSizeDimensions()&&a.fetchFullSizeDimensions(function(){return b.forceUpdate()})});a=babelHelpers["extends"]({},f,(a={},a[c("AdsPlatformTypes").DEFAULT_PLATFORM]=e,a));var g=Object.keys(a).reduce(function(a,b){a[b]=!1;return a},{});this.setState({canResetChanges:g,image:e,initialDialogState:a,platformCustomizations:f})};e.render=function(){return h.jsx(c("AdsImageCropperEditor.react"),babelHelpers["extends"]({accountID:this.props.accountID,disabledSpecs:this.props.disabledSpecs,image:this.state.image,imageSpecs:this.$2(this.props.imageSpecs),libraryImages:this.props.libraryImages,platformCustomizations:this.state.platformCustomizations,selectedPlacement:this.props.selectedPlacement,shouldSaveToAssetLibrary:this.props.shouldSaveToAssetLibrary,shouldShowSpecSelector:this.props.shouldShowSpecSelector,showSpecSelector:!0,suppressValidationError:this.props.suppressValidationError,onClose:this.props.onClose,onConfirm:this.$3,onImageUpdate:this.$4,onReset:this.$5,onSaveToLibraryCheckChange:this.$6},this.state.canResetChanges?{canResetChanges:this.state.canResetChanges}:null))};e.$7=function(a,b,d,e,f){var g=this,h=a.image,i=babelHelpers["extends"]({},a.platformCustomizations),j=this.$8(d),k=b.clone({crops:e});k.isStockImage()&&!k.hasFullSizeDimensions()&&k.fetchFullSizeDimensions(function(){return g.forceUpdate()});j===c("AdsPlatformTypes").DEFAULT_PLATFORM||d==="instagramstory"?(h=k,h.crops=e):(i[j]=k,i[j].crops=e);e=a.initialDialogState&&a.initialDialogState[j]?a.initialDialogState:babelHelpers["extends"]({},a.initialDialogState,(d={},d[j]=k,d));k=Boolean(b.getAPICrops());b=babelHelpers["extends"]({},a.canResetChanges,(d={},d[j]=f&&k,d));return{canResetChanges:b,image:h,initialDialogState:e,platformCustomizations:i}};e.$9=function(a,b){if(!this.props.shouldSaveToAssetLibrary)return;c("promiseDone")(d("AdsSaveCropToAssetLibraryUtils").saveCropsToAssetLibrary(a,b).then(function(a){c("AdsImageCroppedImageUploadSuccessDataAction").dispatch({imageData:a},{line:"408",module:"AdsImageCropperDialog.react.js"})}))};e.$2=function(a){return!this.props.someAdgroupsHaveOffer&&!this.state.image.isStockImage()||a.length===1?a:a.filter(function(a){return a.position!=="feed"&&a.position!=="marketplace"||a.aspectRatio===1.91})};return b}(h.PureComponent);a.defaultProps={disabledSpecs:[],shouldSaveToAssetLibrary:!1,shouldShowSpecSelector:!0,someAdgroupsHaveOffer:!1,onClose:c("emptyFunction"),onSelect:c("emptyFunction")};a.propTypes={accountID:c("prop-types").string,disabledSpecs:c("prop-types").arrayOf(c("prop-types").object).isRequired,image:c("prop-types").object.isRequired,imageSpecs:c("prop-types").array.isRequired,libraryImages:c("prop-types").arrayOf(c("prop-types").shape({url:c("prop-types").string.isRequired,hash:c("prop-types").string.isRequired})),platformCustomizations:c("prop-types").objectOf(c("prop-types").object),selectedPlacement:c("prop-types").string,shouldSaveToAssetLibrary:c("prop-types").bool,shouldShowSpecSelector:c("prop-types").bool.isRequired,suppressValidationError:c("prop-types").bool,onClose:c("prop-types").func.isRequired,onImageUpdate:c("prop-types").func,onSelect:c("prop-types").func.isRequired};g["default"]=a}),98);
__d("adsShouldSaveToAssetLibrarySelector",["AdsShouldSaveToAssetLibraryProvider"],(function(a,b,c,d,e,f,g){"use strict";a=c("AdsShouldSaveToAssetLibraryProvider").toFluxSelector();g["default"]=a}),98);
__d("AdsImageCropperDialogContainer.react",["AdsAccountStore","AdsFluxHooks","AdsImageCropperDialog.react","AdsUEditorAdgroupContext","adsCreateSelector","adsShouldSaveToAssetLibrarySelector","adsUEditorAdgroupSomeHaveOfferSelector","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useContext,j=c("adsCreateSelector")([c("adsShouldSaveToAssetLibrarySelector"),c("AdsAccountStore").getSelectedAccountID,c("adsUEditorAdgroupSomeHaveOfferSelector")],function(a,b,c){a=a.shouldSaveToAssetLibrary;return{someAdgroupsHaveOffer:c,shouldSaveToAssetLibrary:a,selectedAccountID:b}},{name:f.id+".containerSelector"});function a(a){var b,e=i(c("AdsUEditorAdgroupContext"));e=e.adgroupEditorContext;var f=d("AdsFluxHooks").useAdsSelector(j,e);b=(b=a.accountID)!=null?b:f.selectedAccountID;return h.jsx(c("AdsImageCropperDialog.react"),babelHelpers["extends"]({},a,f,{accountID:b,shouldShowSpecSelector:e!=null}))}a.displayName=a.name+" [from "+f.id+"]";b=d("AdsFluxHooks").adsFluxContainer(a,null,{containerName:f.id});g["default"]=b}),98);
__d("VoyageUserJourneyUILayerProviderNoop.react",["react"],(function(a,b,c,d,e,f,g){"use strict";d("react");function a(a){a=a.children;return a}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MessengerURIUtils.bs",["MercuryIDs","MessengerURISerializer","MessengerView","URI"],(function(a,b,c,d,e,f){"use strict";var g;function h(a){var c=b("MessengerURISerializer").deserialize(new(g||(g=b("URI")))(window.location.href)),d=b("MessengerView").DETAIL.THREAD;return b("MessengerURISerializer").serialize(Object.assign(Object.assign({},c),{activeThreadID:a,detailView:d,query:c.queryAll?c.query:void 0}))}function a(a){return h(b("MercuryIDs").getThreadIDFromUserID(a))}function c(a){return h(a.thread_id).setQueryData({mid:a.message_id})}f.getURIForThreadID=h;f.getURIForUserID=a;f.getURIForMessage=c}),null);